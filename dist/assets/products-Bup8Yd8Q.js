import{a0 as h,F as d,L as p}from"./auth-Cphxmk2s.js";const P=h("product",()=>{const r=d([]),c=d(!1),s=d(null),a=p();return{products:r,isLoading:c,error:s,fetchProducts:async()=>{c.value=!0,s.value=null;try{const t=await fetch("https://dummyjson.com/products"),e=await t.json();t.ok?r.value=e.products:s.value="Failed to fetch products"}catch{s.value="Network error"}finally{c.value=!1}},fetchProductById:async t=>{const e=r.value.find(o=>o.id==t);if(e)return e;try{return await(await fetch(`https://dummyjson.com/products/${t}`)).json()}catch{return null}},addProduct:async t=>{if(!a.token)throw new Error("Not authenticated");try{const e=await fetch("https://dummyjson.com/products/add",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a.token}`},body:JSON.stringify(t)}),o=await e.json();if(e.ok)return r.value.push(o),o;throw new Error(o.message||"Failed to add product")}catch(e){throw new Error(e.message||"Network error")}},updateProduct:async(t,e)=>{if(!a.token)throw new Error("Not authenticated");try{const o=await fetch(`https://dummyjson.com/products/${t}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a.token}`},body:JSON.stringify(e)}),n=await o.json();if(o.ok){const u=r.value.findIndex(i=>i.id==t);return u!==-1&&(r.value[u]=n),n}else throw new Error(n.message||"Failed to update product")}catch(o){throw new Error(o.message||"Network error")}},deleteProduct:async t=>{if(!a.token)throw new Error("Not authenticated");try{if((await fetch(`https://dummyjson.com/products/${t}`,{method:"DELETE",headers:{Authorization:`Bearer ${a.token}`}})).ok)return r.value=r.value.filter(o=>o.id!=t),!0;throw new Error("Failed to delete product")}catch(e){throw new Error(e.message||"Network error")}}}});export{P as u};
